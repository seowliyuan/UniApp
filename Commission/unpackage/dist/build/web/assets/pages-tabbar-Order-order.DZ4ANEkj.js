import{C as e,m as a,s,r as t,z as l,q as r,c as d,w as o,i as c,o as i,b as n,u,v as m,d as _,t as h,e as f,x as g,y as p,F as b,f as w,h as O,k,g as P,I as S}from"./index-B3DUDMz2.js";import{N as C,_ as v}from"./zero_logo.BNm1HO9H.js";import{_ as y}from"./_plugin-vue_export-helper.BCo6x5W8.js";const D=y({components:{NavBar:C},data:()=>({isWideScreen:!0,logoSrc:"/static/zero_logo.png",activeTab:"orders",items:[],search:"",searchedOrders:[],currentPage:1,pageSize:10,totalPages:1,pagedOrders:[],showModal:!1,selectedOrder:null}),mounted(){this.checkScreen(),e(this.checkScreen),this.loadMockData()},checkScreen(){a({success:e=>{this.isWideScreen=e.windowWidth>=768}})},beforeDestroy(){window.removeEventListener("resize",this.checkScreen)},onShow(){this.activeTab="orders"},methods:{home(){s({url:"/pages/tabbar/Home/home"})},checkScreen(){"undefined"!=typeof window?this.isWideScreen=window.innerWidth>=768:a({success:e=>{const a="ios"===e.platform||"android"===e.platform;this.isWideScreen=!a}})},handleError(){console.error("Failed to load logo image")},changeTab(e){this.activeTab=e;s({url:{home:"/pages/tabbar/Home/home",wallet:"/pages/tabbar/Wallet/wallet",orders:"/pages/tabbar/Order/order"}[e]||"/"})},fetchOrders(){t({url:"http://localhost:8000/orders.php",method:"GET",success:e=>{console.log("API Success:",e.data),200===e.statusCode&&Array.isArray(e.data)?(this.items=e.data,this.searchedOrders=[...this.items],this.totalPages=Math.ceil(this.searchedOrders.length/this.pageSize),this.updatePagedOrders()):(console.error("Invalid response structure"),this.loadMockData())},fail:e=>{console.error("API Error:",e),this.loadMockData()}})},loadMockData(){console.log("Loading mock data..."),this.items=[{order_id:"ORD001",order_date:"2025-04-15",customer:"John Doe",status:"Complete",total_amount:159.99,commission:15.99,items:[{order_item_name:"Product A",item_price:79.99},{order_item_name:"Product B",item_price:80}]},{order_id:"ORD002",order_date:"2025-04-12",customer:"Jane Smith",status:"Pending",total_amount:299.5,commission:29.95,items:[{order_item_name:"Product C",item_price:299.5}]},{order_id:"ORD003",order_date:"2025-04-10",customer:"Robert Johnson",status:"Processing",total_amount:89.75,commission:8.97,items:[{order_item_name:"Product D",item_price:45.5},{order_item_name:"Product E",item_price:44.25}]},{order_id:"ORD004",order_date:"2025-04-08",customer:"Sarah Williams",status:"Cancelled",total_amount:199,commission:0,items:[{order_item_name:"Product F",item_price:199}]},{order_id:"ORD004",order_date:"2025-04-08",customer:"Sarah Williams",status:"Cancelled",total_amount:199,commission:0,items:[{order_item_name:"Product F",item_price:199}]},{order_id:"ORD004",order_date:"2025-04-08",customer:"Sarah Williams",status:"Cancelled",total_amount:199,commission:0,items:[{order_item_name:"Product F",item_price:199}]},{order_id:"ORD004",order_date:"2025-04-08",customer:"Sarah Williams",status:"Cancelled",total_amount:199,commission:0,items:[{order_item_name:"Product F",item_price:199}]}],this.applyFilters()},applyFilters(){const e=this.search.trim().toLowerCase();if(!this.items||0===this.items.length)return this.searchedOrders=[],this.pagedOrders=[],this.totalPages=1,void(this.currentPage=1);this.searchedOrders=e?this.items.filter((a=>a.order_id.toLowerCase().includes(e))):[...this.items],this.totalPages=Math.ceil(this.searchedOrders.length/this.pageSize),this.currentPage=1,this.updatePagedOrders()},updatePagedOrders(){const e=(this.currentPage-1)*this.pageSize;this.pagedOrders=this.searchedOrders.slice(e,e+this.pageSize)},changePage(e){e<1||e>this.totalPages||(this.currentPage=e,this.updatePagedOrders())},openModal(e){this.selectedOrder=e,this.showModal=!0},closeModal(){this.showModal=!1,this.selectedOrder=null},processOrder(){l({title:`Processing order ${this.selectedOrder.order_id}`,icon:"success"}),setTimeout((()=>{this.closeModal()}),1500)},formatDate(e){if(!e)return"-";return new Date(e).toLocaleDateString("en-MY",{year:"numeric",month:"short",day:"numeric"})},getStatusClass(e){if(!e)return"status-unknown";switch(e.toLowerCase()){case"complete":return"status-complete";case"pending":return"status-pending";case"cancelled":return"status-cancelled";case"processing":return"status-processing";default:return"status-unknown"}}}},[["render",function(e,a,s,t,l,C){const y=O,D=k,M=c,T=P,W=S,F=r("NavBar");return i(),d(M,{class:"container"},{default:o((()=>[l.isWideScreen?(i(),d(M,{key:0,class:"web-nav"},{default:o((()=>[n(M,{class:"nav-bar"},{default:o((()=>[u("img",{onClick:a[0]||(a[0]=e=>C.home()),src:v,alt:"Logo",class:"mobile-logo"}),n(M,{class:"nav-buttons"},{default:o((()=>[n(D,{class:m(["nav-btn",{active:"home"===l.activeTab}]),onClick:a[1]||(a[1]=e=>C.changeTab("home"))},{default:o((()=>[_("Home "),n(y,{class:"icon"},{default:o((()=>[_("🏠")])),_:1})])),_:1},8,["class"]),n(D,{class:m(["nav-btn",{active:"wallet"===l.activeTab}]),onClick:a[2]||(a[2]=e=>C.changeTab("wallet"))},{default:o((()=>[_("Wallet "),n(y,{class:"icon"},{default:o((()=>[_("💳")])),_:1})])),_:1},8,["class"]),n(D,{class:m(["nav-btn",{active:"orders"===l.activeTab}]),onClick:a[3]||(a[3]=e=>C.changeTab("orders"))},{default:o((()=>[_("Orders "),n(y,{class:"icon"},{default:o((()=>[_("📊")])),_:1})])),_:1},8,["class"])])),_:1})])),_:1})])),_:1})):(i(),d(M,{key:1,class:"mobile-logo-container"},{default:o((()=>[n(T,{src:l.logoSrc,class:"mobile-logo",mode:"widthFix",onError:C.handleError},null,8,["src","onError"])])),_:1})),n(M,{class:m(["main-content",{"web-padding":l.isWideScreen}])},{default:o((()=>[l.isWideScreen?(i(),d(M,{key:0,class:"search-filter-container"},{default:o((()=>[n(M,{class:"search-input-wrapper web-search"},{default:o((()=>[n(y,{class:"search-icon"},{default:o((()=>[_("🔍")])),_:1}),n(W,{modelValue:l.search,"onUpdate:modelValue":a[4]||(a[4]=e=>l.search=e),placeholder:"Search Order ID",onInput:C.applyFilters,class:"search-input"},null,8,["modelValue","onInput"])])),_:1})])),_:1})):(i(),d(M,{key:1,class:"search-filter-container"},{default:o((()=>[n(M,{class:"search-input-wrapper mobile-search"},{default:o((()=>[n(y,{class:"search-icon"},{default:o((()=>[_("🔍")])),_:1}),n(W,{modelValue:l.search,"onUpdate:modelValue":a[5]||(a[5]=e=>l.search=e),placeholder:"Search Order ID",onInput:C.applyFilters,class:"search-input"},null,8,["modelValue","onInput"])])),_:1})])),_:1})),n(M,{class:"card"},{default:o((()=>[n(M,{class:"card-header"},{default:o((()=>[n(y,{class:"card-title"},{default:o((()=>[_("Order List")])),_:1}),n(y,{class:"order-count"},{default:o((()=>[_(h(l.searchedOrders.length)+" orders",1)])),_:1})])),_:1}),n(M,{class:"table-container"},{default:o((()=>[l.isWideScreen?(i(),d(M,{key:0,class:"table-header"},{default:o((()=>[n(y,{class:"table-header-cell"},{default:o((()=>[_("Order ID")])),_:1}),n(y,{class:"table-header-cell"},{default:o((()=>[_("Date")])),_:1}),n(y,{class:"table-header-cell"},{default:o((()=>[_("Customer")])),_:1}),n(y,{class:"table-header-cell"},{default:o((()=>[_("Status")])),_:1})])),_:1})):f("",!0),n(M,{class:"table-body"},{default:o((()=>[(i(!0),g(b,null,p(l.pagedOrders,(e=>(i(),d(M,{key:e.order_id,onClick:a=>C.openModal(e),class:m(["table-row",{highlight:"Complete"===e.status,"mobile-card":!l.isWideScreen}])},{default:o((()=>[l.isWideScreen?(i(),d(M,{key:0,class:"table-row-desktop"},{default:o((()=>[n(y,{class:"table-cell order-id"},{default:o((()=>[_(h(e.order_id),1)])),_:2},1024),n(y,{class:"table-cell"},{default:o((()=>[_(h(C.formatDate(e.order_date)),1)])),_:2},1024),n(y,{class:"table-cell"},{default:o((()=>[_(h(e.customer||"-"),1)])),_:2},1024),n(y,{class:"table-cell status-cell"},{default:o((()=>[n(M,{class:m(["status-badge",C.getStatusClass(e.status)])},{default:o((()=>[_(h(e.status||"Unknown"),1)])),_:2},1032,["class"])])),_:2},1024)])),_:2},1024)):(i(),d(M,{key:1,class:"mobile-card-content"},{default:o((()=>[n(M,{class:"mobile-card-row mobile-card-header"},{default:o((()=>[n(y,{class:"order-id"},{default:o((()=>[_("#"+h(e.order_id),1)])),_:2},1024),n(M,{class:m(["status-badge",C.getStatusClass(e.status)])},{default:o((()=>[_(h(e.status||"Unknown"),1)])),_:2},1032,["class"])])),_:2},1024),n(M,{class:"mobile-card-row"},{default:o((()=>[n(y,{class:"mobile-card-label"},{default:o((()=>[_("Date:")])),_:1}),n(y,{class:"mobile-card-value"},{default:o((()=>[_(h(C.formatDate(e.order_date)),1)])),_:2},1024)])),_:2},1024),n(M,{class:"mobile-card-row"},{default:o((()=>[n(y,{class:"mobile-card-label"},{default:o((()=>[_("Customer:")])),_:1}),n(y,{class:"mobile-card-value"},{default:o((()=>[_(h(e.customer||"-"),1)])),_:2},1024)])),_:2},1024),n(M,{class:"mobile-card-row"},{default:o((()=>[n(y,{class:"mobile-card-label"},{default:o((()=>[_("Total:")])),_:1}),n(y,{class:"mobile-card-value"},{default:o((()=>[_("RM"+h(e.total_amount?e.total_amount.toFixed(2):"0.00"),1)])),_:2},1024)])),_:2},1024)])),_:2},1024))])),_:2},1032,["onClick","class"])))),128))])),_:1})])),_:1}),0===l.pagedOrders.length?(i(),d(M,{key:0,class:"empty-state"},{default:o((()=>[n(y,{class:"empty-text"},{default:o((()=>[_("No orders found matching your search")])),_:1})])),_:1})):f("",!0)])),_:1}),n(M,{class:"pagination"},{default:o((()=>[n(D,{class:"pagination-btn",onClick:a[6]||(a[6]=e=>C.changePage(l.currentPage-1)),disabled:1===l.currentPage},{default:o((()=>[n(y,{class:"pagination-icon"},{default:o((()=>[_("◀")])),_:1})])),_:1},8,["disabled"]),n(y,{class:"page-info"},{default:o((()=>[_("Page "+h(l.currentPage)+" of "+h(l.totalPages),1)])),_:1}),n(D,{class:"pagination-btn",onClick:a[7]||(a[7]=e=>C.changePage(l.currentPage+1)),disabled:l.currentPage===l.totalPages},{default:o((()=>[n(y,{class:"pagination-icon"},{default:o((()=>[_("▶")])),_:1})])),_:1},8,["disabled"])])),_:1}),l.showModal?(i(),d(M,{key:2,class:"modal-backdrop",onClick:C.closeModal},{default:o((()=>[n(M,{class:"modal-content",onClick:a[8]||(a[8]=w((()=>{}),["stop"]))},{default:o((()=>[n(M,{class:"modal-header"},{default:o((()=>[n(y,{class:"modal-title"},{default:o((()=>[_("Order Details")])),_:1}),n(D,{class:"close-btn",onClick:C.closeModal},{default:o((()=>[_("×")])),_:1},8,["onClick"])])),_:1}),n(M,{class:"modal-body"},{default:o((()=>[n(M,{class:"detail-row"},{default:o((()=>[n(y,{class:"detail-label"},{default:o((()=>[_("Order ID:")])),_:1}),n(y,{class:"detail-value"},{default:o((()=>[_("#"+h(l.selectedOrder.order_id),1)])),_:1})])),_:1}),n(M,{class:"detail-row"},{default:o((()=>[n(y,{class:"detail-label"},{default:o((()=>[_("Order Date:")])),_:1}),n(y,{class:"detail-value"},{default:o((()=>[_(h(C.formatDate(l.selectedOrder.order_date)),1)])),_:1})])),_:1}),n(M,{class:"detail-row"},{default:o((()=>[n(y,{class:"detail-label"},{default:o((()=>[_("Customer:")])),_:1}),n(y,{class:"detail-value"},{default:o((()=>[_(h(l.selectedOrder.customer||"-"),1)])),_:1})])),_:1}),n(M,{class:"detail-row"},{default:o((()=>[n(y,{class:"detail-label"},{default:o((()=>[_("Status:")])),_:1}),n(M,{class:m(["status-badge modal-status",C.getStatusClass(l.selectedOrder.status)])},{default:o((()=>[_(h(l.selectedOrder.status||"Unknown"),1)])),_:1},8,["class"])])),_:1}),n(M,{class:"items-section"},{default:o((()=>[n(y,{class:"section-title"},{default:o((()=>[_("Order Items:")])),_:1}),n(M,{class:"item-list"},{default:o((()=>[(i(!0),g(b,null,p(l.selectedOrder.items,((e,a)=>(i(),d(M,{key:a,class:"item-row"},{default:o((()=>[n(y,{class:"item-name"},{default:o((()=>[_(h(e.order_item_name),1)])),_:2},1024),n(y,{class:"item-price"},{default:o((()=>[_("RM"+h(parseFloat(e.item_price).toFixed(2)),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),n(M,{class:"financial-details"},{default:o((()=>[n(M,{class:"detail-row total-row"},{default:o((()=>[n(y,{class:"detail-label"},{default:o((()=>[_("Total:")])),_:1}),n(y,{class:"detail-value total-amount"},{default:o((()=>[_("RM"+h(parseFloat(l.selectedOrder.total_amount).toFixed(2)),1)])),_:1})])),_:1}),n(M,{class:"detail-row commission-row"},{default:o((()=>[n(y,{class:"detail-label"},{default:o((()=>[_("Commission:")])),_:1}),n(y,{class:"detail-value"},{default:o((()=>[_("RM"+h(parseFloat(l.selectedOrder.commission||0).toFixed(2)),1)])),_:1})])),_:1})])),_:1})])),_:1}),n(M,{class:"modal-footer"},{default:o((()=>[n(D,{class:"action-btn cancel-btn",onClick:C.closeModal},{default:o((()=>[_("Close")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["onClick"])):f("",!0)])),_:1},8,["class"]),l.isWideScreen?f("",!0):(i(),d(M,{key:2,class:"mobile-nav"},{default:o((()=>[n(F,{activeTab:l.activeTab,onChangeTab:C.changeTab},null,8,["activeTab","onChangeTab"])])),_:1}))])),_:1})}],["__scopeId","data-v-59dc64cd"]]);export{D as default};
