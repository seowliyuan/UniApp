import{z as a,A as e,B as t,r as l,s,m as o,q as n,c,w as d,i,o as r,b as u,u as h,v as m,d as f,e as w,t as b,x as _,y as k,F as p,f as C,h as v,k as g,g as T,I as y}from"./index-B3DUDMz2.js";import{N as S,_ as M}from"./zero_logo.BNm1HO9H.js";import{_ as W}from"./_plugin-vue_export-helper.BCo6x5W8.js";const D=W({components:{NavBar:S},data:()=>({isWideScreen:!0,logoSrc:"/static/zero_logo.png",activeTab:"wallet",currentBalance:2550.15,showModal:!1,selectedTransaction:{},recentTransactions:[{id:"532",reference:"Withdrawal",amount:200,date:"28/4/24 13:11"},{id:"513",reference:"Commission Deposit",amount:118.73,date:"28/4/24 15:00"},{id:"508",reference:"Commission Deposit",amount:154.22,date:"28/4/24 10:00"},{id:"506",reference:"Commission Deposit",amount:232.77,date:"29/4/24 11:30"},{id:"499",reference:"Withdrawal",amount:500,date:"16/2/24 23:30"}],showWithdrawModal:!1,withdrawalAmount:"",withdrawStatus:"",withdrawMessage:"",withdrawableBalance:"2000",showCSVModal:!1,startDate:"",endDate:"",csvRecord:[],showSettingsModal:!1,bankName:"",bankAccNo:"",passwordPrompt:!1,passwordInput:""}),onShow(){this.activeTab="wallet"},mounted(){this.checkScreen(),window.addEventListener("resize",this.checkScreen)},beforeDestroy(){window.removeEventListener("resize",this.checkScreen)},methods:{handleClick(t){switch(t){case"Withdraw Money":this.showWithdrawModal=!0;break;case"Export CSV":this.showCSVModal=!0;break;case"Transaction History":e({url:"/pages/wallet/transaction-history"});break;case"Wallet Settings":this.showSettingsModal=!0;break;default:a({title:`Unknown action: ${t}`,icon:"none"})}},async printCSV(){var e;try{const a=t("username"),s=await l({url:"http://localhost/commission/backend/database/wallet.php",method:"POST",data:{username:a,action:"downloadCSV",startDate:this.startDate,endDate:this.endDate}});(null==(e=s.data)?void 0:e.csvRecord)&&(this.csvRecord=s.data.csvRecord,this.exportCSVToDevice())}catch(s){console.error(s),a({title:"CSV export failed",icon:"none"})}},exportCSVToDevice(){let a=["id","type","amount","description","date"].join(",")+"\n";this.csvRecord.forEach((e=>{a+=Object.values(e).join(",")+"\n"}));const e=new Blob([a],{type:"text/csv"}),t=URL.createObjectURL(e),l=document.createElement("a");l.href=t,l.download="Transaction_History.csv",l.click(),URL.revokeObjectURL(t),this.showCSVModal=!1},async updateWalletSettings(){try{const e=t("username");await l({url:"http://localhost/commission/backend/database/wallet.php",method:"POST",data:{username:e,action:"update",bankName:this.bankName,bankNo:this.bankAccNo}}),a({title:"Updated!",icon:"success"}),this.showSettingsModal=!1}catch(e){console.error(e),a({title:"Update failed",icon:"none"})}},home(){s({url:"/pages/tabbar/Home/home"})},checkScreen(){"undefined"!=typeof window?this.isWideScreen=window.innerWidth>=768:o({success:a=>{const e="ios"===a.platform||"android"===a.platform;this.isWideScreen=!e}})},changeTab(a){this.activeTab=a;s({url:{home:"/pages/tabbar/Home/home",wallet:"/pages/tabbar/Wallet/wallet",orders:"/pages/tabbar/Order/order"}[a]||"/"})},openDetails(a){this.selectedTransaction=a,this.showModal=!0},closeDetails(){this.showModal=!1}}},[["render",function(a,e,t,l,s,o){const S=v,W=g,D=i,R=T,x=n("NavBar"),V=y;return r(),c(D,{class:"container"},{default:d((()=>[s.isWideScreen?(r(),c(D,{key:0,class:"web-nav"},{default:d((()=>[u(D,{class:"nav-bar"},{default:d((()=>[h("img",{onClick:e[0]||(e[0]=a=>o.home()),src:M,alt:"Logo",class:"mobile-logo"}),u(D,{class:"nav-buttons"},{default:d((()=>[u(W,{class:m(["nav-btn",{active:"home"===s.activeTab}]),onClick:e[1]||(e[1]=a=>o.changeTab("home"))},{default:d((()=>[f("Home "),u(S,{class:"icon"},{default:d((()=>[f("ðŸ ")])),_:1})])),_:1},8,["class"]),u(W,{class:m(["nav-btn",{active:"wallet"===s.activeTab}]),onClick:e[2]||(e[2]=a=>o.changeTab("wallet"))},{default:d((()=>[f("Wallet "),u(S,{class:"icon"},{default:d((()=>[f("ðŸ’³")])),_:1})])),_:1},8,["class"]),u(W,{class:m(["nav-btn",{active:"orders"===s.activeTab}]),onClick:e[3]||(e[3]=a=>o.changeTab("orders"))},{default:d((()=>[f("Orders "),u(S,{class:"icon"},{default:d((()=>[f("ðŸ“Š")])),_:1})])),_:1},8,["class"])])),_:1})])),_:1})])),_:1})):(r(),c(D,{key:1,class:"mobile-logo-container"},{default:d((()=>[u(R,{src:s.logoSrc,class:"mobile-logo",mode:"widthFix",onError:a.handleError},null,8,["src","onError"])])),_:1})),s.isWideScreen?w("",!0):(r(),c(D,{key:2,class:"mobile-nav"},{default:d((()=>[u(x,{activeTab:s.activeTab,onChangeTab:o.changeTab},null,8,["activeTab","onChangeTab"])])),_:1})),u(D,{class:m(["main-content",{"web-padding":s.isWideScreen}])},{default:d((()=>[u(D,{class:"wallet-header"},{default:d((()=>[u(S,{class:"wallet-title"},{default:d((()=>[f("Wallet: RM "+b(s.currentBalance),1)])),_:1}),h("br")])),_:1}),u(D,{class:"action-buttons"},{default:d((()=>[u(W,{class:"action-btn",onClick:e[4]||(e[4]=a=>o.handleClick("Withdraw Money"))},{default:d((()=>[f("ðŸ’¸ Withdraw Money")])),_:1}),u(W,{class:"action-btn",onClick:e[5]||(e[5]=a=>o.handleClick("Export CSV"))},{default:d((()=>[f("ðŸ“Š Export CSV")])),_:1}),u(W,{class:"action-btn",onClick:e[6]||(e[6]=a=>o.handleClick("Transaction History"))},{default:d((()=>[f("ðŸ—’ï¸ Transaction History")])),_:1}),u(W,{class:"action-btn",onClick:e[7]||(e[7]=a=>o.handleClick("Wallet Settings"))},{default:d((()=>[f("âš™ï¸ Wallet Settings")])),_:1})])),_:1}),s.isWideScreen?(r(),c(D,{key:1,class:"recent-transactions"},{default:d((()=>[u(S,{class:"transactions-title"},{default:d((()=>[f("Recent Transactions")])),_:1}),u(D,{class:"transaction-table"},{default:d((()=>[u(D,{class:"transaction-row header"},{default:d((()=>[u(S,{class:"cell id"},{default:d((()=>[f("ID")])),_:1}),u(S,{class:"cell"},{default:d((()=>[f("Reference")])),_:1}),u(S,{class:"cell amount"},{default:d((()=>[f("Amount (RM)")])),_:1}),u(S,{class:"cell date"},{default:d((()=>[f("Date")])),_:1})])),_:1}),(r(!0),_(p,null,k(s.recentTransactions,(a=>(r(),c(D,{class:"transaction-row",key:a.id},{default:d((()=>[u(S,{class:"cell id"},{default:d((()=>[f(b(a.id),1)])),_:2},1024),u(S,{class:"cell"},{default:d((()=>[f(b(a.reference),1)])),_:2},1024),u(S,{class:"cell amount"},{default:d((()=>[f(b(a.amount.toFixed(2)),1)])),_:2},1024),u(S,{class:"cell date"},{default:d((()=>[f(b(a.date),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})):(r(),c(D,{key:0,class:"recent-transactions"},{default:d((()=>[u(S,{class:"transactions-title"},{default:d((()=>[f("Recent Transactions")])),_:1}),u(D,{class:"transaction-table"},{default:d((()=>[u(D,{class:"transaction-row header"},{default:d((()=>[u(S,{class:"order-column"},{default:d((()=>[f("ID")])),_:1}),u(S,{class:"order-column"},{default:d((()=>[f("Amount (RM)")])),_:1}),u(S,{class:"order-column"},{default:d((()=>[f("Date")])),_:1})])),_:1}),(r(!0),_(p,null,k(s.recentTransactions,(a=>(r(),c(D,{class:"transaction-row",key:a.id,onClick:e=>o.openDetails(a)},{default:d((()=>[u(S,{class:"order-column"},{default:d((()=>[f(b(a.id),1)])),_:2},1024),u(S,{class:"order-column"},{default:d((()=>[f(b(a.amount.toFixed(2)),1)])),_:2},1024),u(S,{class:"order-column"},{default:d((()=>[f(b(a.date),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}))])),_:1},8,["class"]),s.showModal?(r(),c(D,{key:3,class:"modal-overlay",onClick:C(o.closeDetails,["self"])},{default:d((()=>[u(D,{class:"modal-content"},{default:d((()=>[u(S,{class:"modal-title"},{default:d((()=>[f("Transaction Details")])),_:1}),u(D,{class:"modal-body"},{default:d((()=>[u(S,null,{default:d((()=>[h("strong",null,"ID:"),f(" "+b(s.selectedTransaction.id),1)])),_:1}),u(S,null,{default:d((()=>[h("strong",null,"Reference:"),f(" "+b(s.selectedTransaction.reference),1)])),_:1}),u(S,null,{default:d((()=>[h("strong",null,"Amount:"),f(" RM "+b(s.selectedTransaction.amount),1)])),_:1}),u(S,null,{default:d((()=>[h("strong",null,"Date:"),f(" "+b(s.selectedTransaction.date),1)])),_:1})])),_:1}),u(W,{class:"close-btn",onClick:o.closeDetails},{default:d((()=>[f("Close")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["onClick"])):w("",!0),s.isWideScreen?w("",!0):(r(),c(D,{key:4,class:"mobile-nav"},{default:d((()=>[u(x,{activeTab:s.activeTab,onChangeTab:o.changeTab},null,8,["activeTab","onChangeTab"])])),_:1})),s.showWithdrawModal?(r(),c(D,{key:5,class:"modal-overlay",onClick:e[12]||(e[12]=C((a=>s.showWithdrawModal=!1),["self"]))},{default:d((()=>[u(D,{class:"modal-content"},{default:d((()=>[u(S,{class:"modal-title"},{default:d((()=>[f("Withdraw Money")])),_:1}),u(S,{class:"modal-subtext"},{default:d((()=>[f("Balance available: RM "+b(s.withdrawableBalance),1)])),_:1}),u(D,{class:"quick-amount-buttons"},{default:d((()=>[u(W,{class:"amount-button",onClick:e[8]||(e[8]=a=>s.withdrawalAmount="10.00")},{default:d((()=>[f("RM10")])),_:1}),u(W,{class:"amount-button",onClick:e[9]||(e[9]=a=>s.withdrawalAmount="50.00")},{default:d((()=>[f("RM50")])),_:1}),u(W,{class:"amount-button",onClick:e[10]||(e[10]=a=>s.withdrawalAmount="100.00")},{default:d((()=>[f("RM100")])),_:1})])),_:1}),u(V,{type:"number",modelValue:s.withdrawalAmount,"onUpdate:modelValue":e[11]||(e[11]=a=>s.withdrawalAmount=a),placeholder:"Enter amount",class:"input"},null,8,["modelValue"]),u(D,{class:"bank-info"},{default:d((()=>[u(S,{class:"modal-subtext"},{default:d((()=>[f("Bank: "+b(s.bankName),1)])),_:1}),u(S,{class:"modal-subtext"},{default:d((()=>[f("Account No: "+b(s.bankAccNo),1)])),_:1})])),_:1}),u(W,{class:"close-btn",onClick:a.validateWithdraw},{default:d((()=>[f("Proceed to Withdraw")])),_:1},8,["onClick"])])),_:1})])),_:1})):w("",!0),s.passwordPrompt?(r(),c(D,{key:6,class:"modal-overlay",onClick:e[14]||(e[14]=C((a=>s.passwordPrompt=!1),["self"]))},{default:d((()=>[u(D,{class:"modal-content"},{default:d((()=>[u(S,{class:"modal-title"},{default:d((()=>[f("Enter Password")])),_:1}),u(V,{type:"password",modelValue:s.passwordInput,"onUpdate:modelValue":e[13]||(e[13]=a=>s.passwordInput=a),class:"input"},null,8,["modelValue"]),u(W,{class:"close-btn",onClick:a.confirmWithdraw},{default:d((()=>[f("Confirm")])),_:1},8,["onClick"])])),_:1})])),_:1})):w("",!0),s.withdrawMessage?(r(),c(D,{key:7,class:"modal-overlay",onClick:e[16]||(e[16]=C((a=>s.withdrawMessage=""),["self"]))},{default:d((()=>[u(D,{class:"modal-content"},{default:d((()=>[u(S,{class:"modal-title"},{default:d((()=>[f(b(s.withdrawStatus),1)])),_:1}),u(S,null,{default:d((()=>[f(b(s.withdrawMessage),1)])),_:1}),u(W,{class:"close-btn",onClick:e[15]||(e[15]=a=>s.withdrawMessage="")},{default:d((()=>[f("Close")])),_:1})])),_:1})])),_:1})):w("",!0)])),_:1})}],["__scopeId","data-v-918ce935"]]);export{D as default};
