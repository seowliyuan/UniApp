import{s as e,r as a,a as o,c as s,w as r,i as l,o as t,b as d,d as n,t as i,e as u,f as p,g as c,h as g,j as m,I as w,k as h,l as f}from"./index-B3DUDMz2.js";import{_ as y}from"./_plugin-vue_export-helper.BCo6x5W8.js";const _=y({data:()=>({logoSrc:"/static/zero_logo.png",username:"",password:"",passwordFieldType:"password",passwordIcon:"ðŸ‘ï¸",usernameError:"",passwordError:"",displayErrorText:!1,errorText:"",loading:!1}),methods:{openForgotPassword(){"undefined"!=typeof plus?plus.runtime.openURL("https://shop.peakliving.today/my-account/lost-password/"):window.open("https://shop.peakliving.today/my-account/lost-password/","_blank")},goToNextPage(){e({url:"/pages/tabbar/Wallet/wallet"})},goToNextPage1(){e({url:"/pages/tabbar/Order/order"})},goToNextPage2(){e({url:"/pages/tabbar/Home/home"})},async handleSubmit(){this.loading=!0,console.log("ðŸ”µ Submit button clicked");const s={username:this.username,password:this.password};console.log("ðŸŸ¡ Payload:",s);try{const r=await a({url:"http://localhost:8000/login.php",method:"POST",data:s,header:{"Content-Type":"application/json"}});console.log("ðŸŸ¢ Response received:",r),200===r.statusCode&&r.data.success?(console.log("âœ… Login successful"),o("token",r.data.token),o("username",r.data.username),e({url:"/pages/tabbar/Home/home"})):(console.warn("âš ï¸ Login failed:",r.data.message),this.errorText=r.data.message||"Invalid username or password.",this.displayErrorText=!0)}catch(r){console.error("ðŸ”´ Error during login request:",r),this.errorText="Failed to connect to the server. Please try again.",this.displayErrorText=!0}finally{this.loading=!1}},togglePassword(){this.passwordFieldType="password"===this.passwordFieldType?"text":"password",this.passwordIcon="password"===this.passwordFieldType?"ðŸ‘ï¸":"ðŸ‘ï¸â€ðŸ—¨ï¸"}}},[["render",function(e,a,o,y,_,b){const k=c,T=g,x=l,P=m,C=w,E=h,F=f;return t(),s(x,{class:"logoContainer"},{default:r((()=>[d(k,{src:_.logoSrc,class:"mobile-logo",mode:"widthFix",onError:e.handleError},null,8,["src","onError"]),_.displayErrorText?(t(),s(x,{key:0,class:"errorContainer"},{default:r((()=>[d(T,null,{default:r((()=>[n(i(_.errorText),1)])),_:1})])),_:1})):u("",!0),d(F,{onSubmit:p(b.handleSubmit,["prevent"]),class:"form-card"},{default:r((()=>[d(P,null,{default:r((()=>[n("Username:")])),_:1}),d(C,{type:"text",required:"",modelValue:_.username,"onUpdate:modelValue":a[0]||(a[0]=e=>_.username=e),name:"username",class:"uni-input"},null,8,["modelValue"]),d(x,{class:"error"},{default:r((()=>[n(i(_.usernameError),1)])),_:1}),d(P,null,{default:r((()=>[n("Password:")])),_:1}),d(x,{class:"password-container"},{default:r((()=>[d(C,{type:_.passwordFieldType,required:"",modelValue:_.password,"onUpdate:modelValue":a[1]||(a[1]=e=>_.password=e),name:"password",class:"uni-input"},null,8,["type","modelValue"]),d(T,{class:"toggle-password",onClick:b.togglePassword},{default:r((()=>[n(i(_.passwordIcon),1)])),_:1},8,["onClick"])])),_:1}),_.passwordError?(t(),s(x,{key:0,class:"error"},{default:r((()=>[n(i(_.passwordError),1)])),_:1})):u("",!0),d(E,{class:"submit-btn",disabled:_.loading,onClick:b.handleSubmit},{default:r((()=>[_.loading?(t(),s(T,{key:0},{default:r((()=>[n("Loading...")])),_:1})):(t(),s(T,{key:1},{default:r((()=>[n("Login")])),_:1}))])),_:1},8,["disabled","onClick"]),d(x,{class:"link",onClick:b.openForgotPassword},{default:r((()=>[n(" Forgot Password? ")])),_:1},8,["onClick"])])),_:1},8,["onSubmit"]),d(E,{onClick:a[2]||(a[2]=e=>b.goToNextPage2())},{default:r((()=>[n("Home")])),_:1}),d(E,{onClick:a[3]||(a[3]=e=>b.goToNextPage())},{default:r((()=>[n("Wallet")])),_:1}),d(E,{onClick:a[4]||(a[4]=e=>b.goToNextPage1())},{default:r((()=>[n("Orders")])),_:1})])),_:1})}],["__scopeId","data-v-278da2df"]]);export{_ as default};
