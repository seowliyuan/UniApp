"use strict";const o=require("../../common/vendor.js"),e={data:()=>({logoSrc:"/static/zero_logo.png",username:"",password:"",passwordFieldType:"password",passwordIcon:"ðŸ‘ï¸",usernameError:"",passwordError:"",displayErrorText:!1,errorText:"",loading:!1}),methods:{openForgotPassword(){"undefined"!=typeof plus?plus.runtime.openURL("https://shop.peakliving.today/my-account/lost-password/"):window.open("https://shop.peakliving.today/my-account/lost-password/","_blank")},goToNextPage(){o.index.switchTab({url:"/pages/tabbar/Wallet/wallet"})},goToNextPage1(){o.index.switchTab({url:"/pages/tabbar/Order/order"})},goToNextPage2(){o.index.switchTab({url:"/pages/tabbar/Home/home"})},async handleSubmit(){this.loading=!0,console.log("ðŸ”µ Submit button clicked");const e={username:this.username,password:this.password};console.log("ðŸŸ¡ Payload:",e);try{const s=await o.index.request({url:"http://localhost:8000/login.php",method:"POST",data:e,header:{"Content-Type":"application/json"}});console.log("ðŸŸ¢ Response received:",s),200===s.statusCode&&s.data.success?(console.log("âœ… Login successful"),o.index.setStorageSync("token",s.data.token),o.index.setStorageSync("username",s.data.username),o.index.switchTab({url:"/pages/tabbar/Home/home"})):(console.warn("âš ï¸ Login failed:",s.data.message),this.errorText=s.data.message||"Invalid username or password.",this.displayErrorText=!0)}catch(s){console.error("ðŸ”´ Error during login request:",s),this.errorText="Failed to connect to the server. Please try again.",this.displayErrorText=!0}finally{this.loading=!1}},togglePassword(){this.passwordFieldType="password"===this.passwordFieldType?"text":"password",this.passwordIcon="password"===this.passwordFieldType?"ðŸ‘ï¸":"ðŸ‘ï¸â€ðŸ—¨ï¸"}}};const s=o._export_sfc(e,[["render",function(e,s,r,a,t,d){return o.e({a:t.logoSrc,b:o.o(((...o)=>e.handleError&&e.handleError(...o))),c:t.displayErrorText},t.displayErrorText?{d:o.t(t.errorText)}:{},{e:t.username,f:o.o((o=>t.username=o.detail.value)),g:o.t(t.usernameError),h:t.passwordFieldType,i:t.password,j:o.o((o=>t.password=o.detail.value)),k:o.t(t.passwordIcon),l:o.o(((...o)=>d.togglePassword&&d.togglePassword(...o))),m:t.passwordError},t.passwordError?{n:o.t(t.passwordError)}:{},{o:t.loading},(t.loading,{}),{p:t.loading,q:o.o(((...o)=>d.handleSubmit&&d.handleSubmit(...o))),r:o.o(((...o)=>d.openForgotPassword&&d.openForgotPassword(...o))),s:o.o(((...o)=>d.handleSubmit&&d.handleSubmit(...o))),t:o.o((o=>d.goToNextPage2())),v:o.o((o=>d.goToNextPage())),w:o.o((o=>d.goToNextPage1()))})}],["__scopeId","data-v-d5b87868"]]);qa.createPage(s);
