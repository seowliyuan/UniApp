"use strict";const e=require("../../../common/vendor.js"),t=require("../../../common/assets.js"),r={components:{NavBar:()=>"../../Nav/NavBar.js"},data:()=>({logoSrc:"/static/zero_logo.png",isWideScreen:!0,activeTab:"home",username:"",overallCommission:0,totalSales:0,walletAmount:0,totalOrders:0,verifiedOrders:0,recentOrders:[]}),mounted(){this.checkScreen(),window.addEventListener("resize",this.checkScreen),this.fetchData(),console.log("Logo path:",this.logoSrc)},beforeDestroy(){window.removeEventListener("resize",this.checkScreen)},methods:{handleError(e){console.error("Image load error:",e.detail.errMsg),this.logoSrc="/static/fallback_logo.png"},home(){e.index.switchTab({url:"/pages/tabbar/tabbar-1/tabbar-1"})},checkScreen(){"undefined"!=typeof window?this.isWideScreen=window.innerWidth>=768:e.index.getSystemInfo({success:e=>{const t="ios"===e.platform||"android"===e.platform;this.isWideScreen=!t}})},goToWallet(){e.index.switchTab({url:"/pages/tabbar/tabbar-2/tabbar-2"})},changeTab(t){this.activeTab=t;e.index.switchTab({url:{home:"/pages/tabbar/Home/home",wallet:"/pages/tabbar/Wallet/wallet",orders:"/pages/tabbar/Order/order"}[t]||"/"})},async fetchData(){try{const t=(await e.index.request({url:"http://localhost:8000/orders_edit.php",method:"POST",data:{username:this.username},header:{"Content-Type":"application/json"}})).data;this.walletAmount=t.walletAmount||0,this.totalSales=parseFloat(t.total_sales||0).toFixed(2),this.overallCommission=parseFloat(t.overall_commission||0).toFixed(2),this.totalOrders=t.total_orders||0,this.verifiedOrders=t.verified_orders||0,this.recentOrders=t.items?t.items.slice(0,5):[]}catch(t){console.error("Fetch error:",t)}},handleLogout(){e.index.removeStorageSync("token"),e.index.removeStorageSync("username"),e.index.redirectTo({url:"/pages/login/login"})}}};if(!Array){e.resolveComponent("NavBar")()}const a=e._export_sfc(r,[["render",function(r,a,o,s,i,n){return e.e({a:i.isWideScreen},i.isWideScreen?{b:e.o((e=>n.home())),c:t._imports_0,d:"home"===i.activeTab?1:"",e:e.o((e=>n.changeTab("home"))),f:"wallet"===i.activeTab?1:"",g:e.o((e=>n.changeTab("wallet"))),h:"orders"===i.activeTab?1:"",i:e.o((e=>n.changeTab("orders")))}:{j:i.logoSrc,k:e.o(((...e)=>n.handleError&&n.handleError(...e)))},{l:!i.isWideScreen},i.isWideScreen?{}:{m:e.o(n.changeTab),n:e.p({activeTab:i.activeTab})},{o:e.t(i.username),p:t._imports_1,q:e.o(((...e)=>n.handleLogout&&n.handleLogout(...e))),r:e.t(i.overallCommission),s:e.t(i.totalSales),t:e.t(i.totalOrders),v:e.t(i.verifiedOrders),w:e.t(i.walletAmount),x:e.o((e=>n.goToWallet())),y:e.f(i.recentOrders,((t,r,a)=>({a:e.t(t.id),b:e.t(t.date),c:e.t(t.total),d:t.id}))),z:i.isWideScreen?1:""})}],["__scopeId","data-v-5d5a9d0a"]]);qa.createPage(a);
